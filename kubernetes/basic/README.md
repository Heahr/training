## Kubernetes basic  

##### 쿠버네티스에 대해 알아보도록 하자!

[뒤로가기](/kubernetes/README.md)

이번에는 [쿠버네티스](https://ko.wikipedia.org/wiki/%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4)의 기본적인 내용에 대해 살펴보도록 하자.  

우선 쿠버네티스란 무엇일까? 위의 링크에도 나와있지만, 위키백과에 따르면 다음과 같다.  

> 쿠버네티스는 디플로이 자동화, 스케일링, 컨테이너화된 애플리케이션의 관리를 위한 오픈소스 시스템으로서 목적은 여러 클러스터의 호스트 간에 애플리케이션 컨테이너의 배치, 스케일링, 운영을 자동화하기 위한 플랫폼을 제공하기 위해 사용된다. 도커를 포함하여 일련의 컨테이너 도구들과 함께 동작한다.  

아직 많이 어렵게 다가온다. 그럼 developer-ibm에서는 어떻게 설명하고 있을까?  

> 쿠버네티스는 컨테이너의 배포, 확장, 운영을 위해 고안된 오픈소스 플랫폼 입니다. 사용자는 쿠버네티스로 애플리케이션을 빠르게 배포 및 확장할 수 있으며 자원을 필요한 만큼 효율적으로 사용할 수 있습니다. 또한, 쿠버네티스는 자가회복 기능으로 사용자에게 무중단 서비스를 제공합니다.

즉, 쿠버네티스는 컨테이너라고 불리는 단위의 배포, 확장, 운영을 위해 고안되었고, 쿠버네티스를 사용하면 애플리케이션을 빠르게 배포 및 확장할 수 있다.  

더불어 자원을 필요한 만큼 효율적으로 사용할 수 있고, 자가회복 기능으로 사용자에게 무중단 서비스를 제공할 수도 있다.  

어느정도 감이 잡힌다. 그렇다면 앞서 나온 정의에 해당하는 용어에 대해서 살펴보도록 하자.  

#### 컨테이너?  

쿠버네티스를 이해하려면 먼저 컨테이너에 대해 알아야 한다. 도커의 자료에도 적혀있겠지만 컨테이너는 어디서나 실행시킬 수 있는 소형의 독립 운영체지를 말한다.  

이는 공용 레포지토리나 개인 레포지토리에서 호스팅 되는 일련의 명령에 따라 몇 초만에 생성이 가능하다.  

컨테이너는 애플리케이션을 실행할 수 있으며 애플리케이션의 시스템 수준 요구 사항에 맞게 특별히 설계되어, 실행 시 사용할 JVM 버전을 정의한다. 즉, 컨테이너를 사용하면 로컬 개발 환경이 프로덕션 한경과 정확히 동일하게 유지되는 것이다.  

> 여기서 프로덕션 환경이란 라이브 환경을 지칭하며 실제 서비스가 제공되는 환경을 말한다.  

#### 디플로이?  

이에 대해 이야기하려면 deploy에 대해 알아야 한다. deploy란 군대에서 병력을 배치할 때 사용되는 용어이다. 즉, 배치라는 이름으로 부를 수 있으며 만들어진 프로그램을 서비스 위치로 보내는 작업을 말한다.  

즉, 릴리즈, 설치 및 활성화/비활성화, 갱신 등의 과정을 통틀어 이야기한다고 할 수 있다.  

이제 디플로이를 자동화한다는 개념이 무엇을 말하는 것인지 이해할 수 있다. 앞서 말한 디플로이에 해당하는 개념 모두를 자동화해준다고 보면 될 것이다.  

#### 스케일링  

서비스의 흥행상황은 항상 유동적이다. 접속자가 많을 때도 있고, 적을 때도 있다. 어떤 서비스는 완만하게 성장하는 경우도 있고, 어떤 서비스는 특정 시간에 접속이 집중될 수도 있다.  

수강신청이나 귀성길 열차예매와 같은 업무를 처리하는 시스템이 그렇다. 예측하지 못한 순간에 시스템에 폭주하는 경우도 있다.  

이런 상황은 물론 비즈니스의 관점에서는 행복한 순간이라고 할 수 있겠지만, 이에 대한 준비가 되어 있지 않다면 이것은 비즈니스적인 클라이막스를 두손 놓고 보내버리는 수 밖에 없다.  

> 그러면 스케일을 키우면 되잖아?  

이 질문은 상대적 기회비용을 발생시킬 수 있다. 가장 큰 이유는 비용이다. 수강신청과 귀성길 열차예매의 경우는 그 순간이 지나면 스케일이 확 줄어든다. 그래서 시스템이 폭주할 것을 알면서도 섣부르게 스케일을 키울 수 없다.  

만약 일정 수준에 도달하면 자동으로 스케일을 조절해주는 기능이 있다면 좋지 않을까? 그것이 바로 스케일링이다.  

#### 클러스터?  

일반적으로 클러스터링이라면 여러 대의 컴퓨터들이 연결되어 하나의 시스템처럼 동작하는 것을 말한다. 분산 컴퓨팅에서 주로 사용되는 용어로 저렴한 비용으로 고성능을 내기 위해 사용한다.  

쿠버네티스는 이처럼 클러스터링을 제공해 하나의 노드에서 여러 컨테이너를 관리하고 예약할수 있다. 이는 선언형프로그래밍 형식으로, 쿠버네티스 컨트롤 플레인(쿠버네티스 마스터)을 통해 특정 구성을 지정하면 쿠버네티스가 그 상태를 자동으로 유지하게 된다.  

여기서의 노드는 하나의 운영체제가 실행되는 공간을 이야기한다. 즉, 하나의 머신을 이야기하며 자세한 설명은 아래의 용어를 참고하기 바란다.  

#### 쿠버네티스에서 사용되는 용어에 대한 설명  

> Pod : 클러스터에서 실행중인 하나 이상의 컨테이너 그룹을 말한다. Pod 안에서의 모든 컨테이너는 IP 주소, IPC, 호스트 이름 및 기타 리소스를 공유한다.  
>
> Node : Pod들이 실행되는 머신이다.   
>
> Kubernetes Master : Kubernetes 노드를 제어하는 머신입니다. 여기에서 모든 명령이 실행됩니다.  
>
> API Server : API Server는 Kubernetes 핵심 구성 요소이며, HTTP를 통해 내부 및 외부 인터페이스를 제공합니다. 이를 통해 Pod, Service, Replication Controller 등의 설정을 할 수 있습니다.  
>
> Controller Manager : DaemonSet Controller, Replication Controller등의 개체를 모니터링하고 변경 사항이 발생할 때 Pod의 증가 또는 감소를 수행합니다.  
>
> Scheduler : Scheduler는 각 노드에서 리소스 사용률을 추적하여 Pod가 실행되어야 하는 노드를 선택하는 일을 합니다.  
>
> Kubelet : 노드에서 실행되는 서비스로, Pod Spec에 정의된 상태로 컨테이너가 실행 중인지 확인하고 유지하도록 합니다.  
>
> Kube-proxy : 네트워크 프록시와 로드 밸런서 기능을 제공합니다.  


#### 참고 자료

[What is kubernetes?](https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/)  
[초보자를 위한 쿠버네티스 - Samsung SDS](https://www.samsungsds.com/global/ko/support/insights/Kubernetes_inform_kr.html)  
[생활코딩 - AWS Auto Scaling](https://opentutorials.org/course/608/3010)  
[쿠버네티스 실습 - Developer.IBM](https://developer.ibm.com/kr/cloud/2018/01/25/%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%EC%8B%A4%EC%8A%B5/)  
[쿠버네티스 시작하기 - 백기선 Youtube](https://www.youtube.com/watch?v=IFc1mG48j0s)  

